export async function onRequest(e){if("POST"!==e.request.method)return new Response("Method Not Allowed",{status:405});let t=await e.request.json(),s="Unknown",n=e.request.headers.get("user-agent");if(!n.includes("Chrome")||n.includes("Edge")||n.includes("OPR")?n.includes("Firefox")?s="Firefox":n.includes("Safari")&&!n.includes("Chrome")?s="Safari":n.includes("Edge")?s="Edge":(n.includes("OPR")||n.includes("Opera"))&&(s="Opera"):s="Chrome",!t.title||!t.description||!t.type)return new Response("Bad Request",{status:400});const i=`**Browser**\n${s}\n**Details**\n${t.description}`,o=await fetch(`https://api.github.com/repos/${e.env.GITHUB_REPO}/issues`,{method:"POST",headers:{Authorization:`token ${e.env.GITHUB_TOKEN}`,Accept:"application/vnd.github+json","User-Agent":"cloudflare-pages-form"},body:JSON.stringify({title:t.title,body:i,labels:[t.type.toLowerCase()],assignee:"jack-hickey"})});return o.ok?new Response("",{status:200}):new Response(await o.text(),{status:o.status})}