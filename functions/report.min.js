export async function onRequest(e){if("POST"!==e.request.method)return new Response("Method Not Allowed",{status:405});let t=await e.request.json(),n="Unknown",s=navigator.userAgent,i="Unknown",o=navigator.platform.toLowerCase();if(!s.includes("Chrome")||s.includes("Edge")||s.includes("OPR")?s.includes("Firefox")?n="Firefox":s.includes("Safari")&&!s.includes("Chrome")?n="Safari":s.includes("Edge")?n="Edge":(s.includes("OPR")||s.includes("Opera"))&&(n="Opera"):n="Chrome",o.includes("win")?i="Windows":o.includes("mac")?i="macOS":o.includes("linux")?i="Linux":/iphone|ipad|ipod/.test(s.toLowerCase())?i="iOS":/android/.test(s.toLowerCase())&&(i="Android"),!t.title||!t.description||!t.type)return new Response("Bad Request",{status:400});const a=`\n\t\t**Browser**\n\t\t${n}\n\n\t\t**Operating System**\n\t\t${i}\n\n\t\t**Details**\n\t\t${t.description}\n\t`,r=await fetch(`https://api.github.com/repos/${e.env.GITHUB_REPO}/issues`,{method:"POST",headers:{Authorization:`token ${e.env.GITHUB_TOKEN}`,Accept:"application/vnd.github+json","User-Agent":"cloudflare-pages-form"},body:JSON.stringify({title:t.title,body:a,labels:[t.type.toLowerCase()],assignee:"jack-hickey"})});return r.ok?new Response("",{status:200}):new Response(await r.text(),{status:r.status})}