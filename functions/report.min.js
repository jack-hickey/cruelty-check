export async function onRequest(e){if("POST"!==e.request.method)return new Response("Method Not Allowed",{status:405});const t=await e.request.formData(),s=t.get("type"),o=t.get("title"),n=t.get("description");if(!o||!n||!s)return new Response("All fields are required",{status:400});const i=`**Type:** ${s}\n**Description:**\n${n}`,r=await fetch(`https://api.github.com/repos/${e.env.GITHUB_REPO}/issues`,{method:"POST",headers:{Authorization:`token ${e.env.GITHUB_TOKEN}`,Accept:"application/vnd.github+json","User-Agent":"cloudflare-pages-form"},body:JSON.stringify({title:o,body:i})});if(!r.ok){const t=await r.text();return console.log(e.env.GITHUB_TOKEN),console.log(e.env.GITHUB_REPO),new Response(`GitHub API error: ${t}`,{status:r.status})}return new Response("Your issue has been submitted to GitHub!",{status:200})}