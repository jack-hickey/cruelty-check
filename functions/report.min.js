export async function onRequest(e){if("POST"!==e.request.method)return new Response("Method Not Allowed",{status:405});const t=await e.request.json();if(!t.title||!t.description||!t.type)return new Response("Bad Request",{status:400});const s=`**Type:** ${t.type}\n**Description:**\n${t.description}`,n=await fetch(`https://api.github.com/repos/${e.env.GITHUB_REPO}/issues`,{method:"POST",headers:{Authorization:`token ${e.env.GITHUB_TOKEN}`,Accept:"application/vnd.github+json","User-Agent":"cloudflare-pages-form"},body:JSON.stringify({title:t.title,body:s,labels:[t.type.toLowerCase()],assignee:"jack-hickey"})});return n.ok?new Response("",{status:200}):new Response(await n.text(),{status:n.status})}