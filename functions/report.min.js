export async function onRequest(e){if("POST"!==e.request.method)return new Response("Method Not Allowed",{status:405});const t=await e.request.formData(),s=t.get("type"),n=t.get("title"),o=t.get("description");if(!n||!o||!s)return new Response("All fields are required",{status:400});const i=`**Type:** ${s}\n**Description:**\n${o}`,r=await fetch(`https://api.github.com/repos/${e.env.GITHUB_REPO}/issues`,{method:"POST",headers:{Authorization:`token ${e.env.GITHUB_TOKEN}`,Accept:"application/vnd.github+json","User-Agent":"cloudflare-pages-form"},body:JSON.stringify({title:n,body:i})});if(!r.ok){await r.text();return new Response("GitHub API error",{status:r.status})}return new Response("Your issue has been submitted to GitHub!",{status:200})}