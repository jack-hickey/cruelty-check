export async function onRequest(e){if("POST"!==e.request.method)return new Response("Method Not Allowed",{status:405});let t=await e.request.json(),s="Unknown",n="Unknown",i=e.request.headers.get("user-agent").toLowerCase();if(!i.includes("chrome")||i.includes("edge")||i.includes("opr")?i.includes("firefox")?s="Firefox":i.includes("safari")&&!i.includes("chrome")?s="Safari":i.includes("edge")?s="Edge":(i.includes("opr")||i.includes("opera"))&&(s="Opera"):s="Chrome",/Windows NT/i.test(i)?n="Windows":/Macintosh|Mac OS X/i.test(i)?n="macOS":/Linux/i.test(i)?n="Linux":/Android/i.test(i)?n="Android":/iPhone|iPad|iPod/i.test(i)&&(n="iOS"),!t.title||!t.description||!t.type)return new Response("Bad Request",{status:400});const o=`### Browser \n ${s} \n ###Operating System \n ${n} \n ### Details \n ${t.description}`,a=await fetch(`https://api.github.com/repos/${e.env.GITHUB_REPO}/issues`,{method:"POST",headers:{Authorization:`token ${e.env.GITHUB_TOKEN}`,Accept:"application/vnd.github+json","User-Agent":"cloudflare-pages-form"},body:JSON.stringify({title:t.title,body:o,labels:[t.type.toLowerCase()],assignee:"jack-hickey"})});return a.ok?new Response("",{status:200}):new Response(await a.text(),{status:a.status})}