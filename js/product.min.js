class Product{constructor(t){this.Name=t.Name,this.Vegan=1===t.Is_Vegan,this.Image=t.Image,this.Brand=new Brand(t)}static search(t){return new Promise(e=>Ajax.Post("search",{body:{query:t},success:{ok:t=>e(t.body.map(t=>new Product(t)))}}))}static add(){Dialog.ShowCustom(Localizer.ADD_PRODUCT_TITLE,Localizer.ADD_PRODUCT_DESC,'\n\t\t\t\t<chip-tabgroup id="tgAddProduct">\n\t\t\t\t\t<chip-tab>\n\t\t\t\t\t\t<chip-form>\n\t\t\t\t\t\t\t<chip-input\n\t\t\t\t\t\t\t\tid="txtProductName"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tmax-length="100"\n\t\t\t\t\t\t\t\tlabel="Product name">\n\t\t\t\t\t\t\t</chip-input>\n\n\t\t\t\t\t\t\t<chip-dropdown\n\t\t\t\t\t\t\t\tid="drpBrands"\n\t\t\t\t\t\t\t\tclass="mt-form brand-selector"\n\t\t\t\t\t\t\t\tdefault="Choose a brand"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tsearchable\n\t\t\t\t\t\t\t\tlabel="Brand">\n\t\t\t\t\t\t\t</chip-dropdown>\n\n\t\t\t\t\t\t\t<chip-checkbox\n\t\t\t\t\t\t\t\tid="cbVegan"\n\t\t\t\t\t\t\t\tclass="mt-form"\n\t\t\t\t\t\t\t\thelper-text="Please tick if this product contains no animal ingredients and is suitable for vegans."\n\t\t\t\t\t\t\t\tlabel="This product is vegan"\n\t\t\t\t\t\t\t</chip-checkbox>\n\t\t\t\t\t\t</chip-form>\n\t\t\t\t\t</chip-tab>\n\t\t\t\t\t<chip-tab>\n\t\t\t\t\t\t<chip-header class="mb-lg" size="4">Add a new brand</chip-header>\n\n\t\t\t\t\t\t<chip-form>\n\t\t\t\t\t\t\t<chip-input\n\t\t\t\t\t\t\t\tid="txtBrandName"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tlabel="Brand name">\n\t\t\t\t\t\t\t</chip-input>\n\n\t\t\t\t\t\t\t<chip-dropdown\n\t\t\t\t\t\t\t\tid="drpBrandParent"\n\t\t\t\t\t\t\t\tsearchable\n\t\t\t\t\t\t\t\thelper-text="If this brand is owned by a parent company, please specify the parent here."\n\t\t\t\t\t\t\t\tclass="mt-form brand-selector"\n\t\t\t\t\t\t\t\tsecondary-label="(optional)"\n\t\t\t\t\t\t\t\tlabel="Parent company">\n\t\t\t\t\t\t\t</chip-dropdown>\n\n\t\t\t\t\t\t\t<chip-header size="5" class="mt-form">This brand:</chip-header>\n\n\t\t\t\t\t\t\t<chip-list class="mt-sm" gap="sm">\n\t\t\t\t\t\t\t\t<chip-listitem>\n\t\t\t\t\t\t\t\t\t<chip-checkbox\n\t\t\t\t\t\t\t\t\t\tid="cbCrueltyFree"\n\t\t\t\t\t\t\t\t\t\tlabel="Is certified cruelty-free">\n\t\t\t\t\t\t\t\t\t</chip-checkbox>\n\t\t\t\t\t\t\t\t</chip-listitem>\n\t\t\t\t\t\t\t\t<chip-listitem>\n\t\t\t\t\t\t\t\t\t<chip-checkbox\n\t\t\t\t\t\t\t\t\t\tid="cbBCorp"\n\t\t\t\t\t\t\t\t\t\tlabel="Is a B Corporation">\n\t\t\t\t\t\t\t\t\t</chip-checkbox>\n\t\t\t\t\t\t\t\t</chip-listitem>\n\t\t\t\t\t\t\t\t<chip-listitem>\n\t\t\t\t\t\t\t\t\t<chip-checkbox\n\t\t\t\t\t\t\t\t\t\tid="cbFairTrade"\n\t\t\t\t\t\t\t\t\t\tlabel="Is Fair Trade certified">\n\t\t\t\t\t\t\t\t\t</chip-checkbox>\n\t\t\t\t\t\t\t\t</chip-listitem>\n\t\t\t\t\t\t\t\t<chip-listitem>\n\t\t\t\t\t\t\t\t\t<chip-checkbox\n\t\t\t\t\t\t\t\t\t\tid="cbAnimalTesting"\n\t\t\t\t\t\t\t\t\t\tlabel="Engages in animal testing">\n\t\t\t\t\t\t\t\t\t</chip-checkbox>\n\t\t\t\t\t\t\t\t</chip-listitem>\n\t\t\t\t\t\t\t</chip-list>\n\n\t\t\t\t\t\t\t<div class="h-align ms-auto w-fit gap-sm mt-card">\n\t\t\t\t\t\t\t\t<chip-button\n\t\t\t\t\t\t\t\t\tstep-direction="previous"\n\t\t\t\t\t\t\t\t\tvariation="info-tertiary"\n\t\t\t\t\t\t\t\t\ticon="fas fa-chevron-left">\n\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t</chip-button>\n\t\t\t\t\t\t\t\t<chip-button\n\t\t\t\t\t\t\t\t\tid="btnAddBrand">\n\t\t\t\t\t\t\t\t\tAdd brand\n\t\t\t\t\t\t\t\t</chip-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</chip-form>\n\t\t\t\t\t</chip-tab>\n\t\t\t\t</chip-tabgroup>\n\t\t\t',{Size:"md",OnRefreshEvents:t=>{const e=t.querySelector("chip-tabgroup");e.onchange=()=>{document.querySelector(".dialog .card-footer").toggleClass("d-none",1===e.selectedIndex)},t.querySelectorAll(".brand-selector").forEach(e=>e.GetSearchedItems=async n=>{let i=[];return i=(await Brand.getAll(n)).map(t=>document.createElementWithContents("chip-dropdownitem",t.Name,{value:t.ID})),"drpBrandParent"!==e.id&&i.push(document.createElementWithContents("chip-dropdownitem","Add new brand",{onclick:()=>{t.querySelector("chip-tab + chip-tab").Select()},icon:"fas fa-plus"})),i})},OnCheckValid:t=>![...document.querySelectorAll("chip-form")].filter(t=>!t.reportValidity()).length,AffirmativeText:"Submit"}).then(()=>Ajax.Post("addproduct",{body:{Name:txtProductName.value.trim(),BrandID:parseInt(drpBrands.value)||0,Vegan:cbVegan.checked},success:{ok:t=>{Dialog.ShowSuccess("Product submitted","Thank you for submitting a new product to Cruelty Check! Your submission has been sent for review and will be visible on the site once accepted.")}}}))}reportIncorrect(){Dialog.ShowTextBox(Localizer.INCORRECT_INFORMATION_TITLE,Localizer.INCORRECT_INFORMATION_DESC,{Rows:12,AffirmativeText:"Submit",Multiline:!0}).then(t=>{report("INCORRECT-INFO","Incorrect Product Information",`Using the built in feedback feature, a user has reported that **${this.Name}** by **${this.Brand.Name}** has incorrect information, stating:\n>${t}`)})}}