class Product{constructor(t){this.Name=t.Name,this.Vegan=1===t.Is_Vegan,this.Image=t.Image,this.Brand=new Brand(t)}static search(t){return new Promise(e=>Ajax.Post("search",{body:{query:t},success:{ok:t=>e(t.body.map(t=>new Product(t)))}}))}static add(){Dialog.ShowCustom(Localizer.ADD_PRODUCT_TITLE,Localizer.ADD_PRODUCT_DESC,'\n\t\t\t\t<chip-tabgroup>\n\t\t\t\t\t<chip-tab>\n\t\t\t\t\t\t<chip-form>\n\t\t\t\t\t\t\t<chip-input\n\t\t\t\t\t\t\t\tid="txtProductName"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tmax-length="100"\n\t\t\t\t\t\t\t\tlabel="Product name">\n\t\t\t\t\t\t\t</chip-input>\n\n\t\t\t\t\t\t\t<chip-dropdown\n\t\t\t\t\t\t\t\tid="drpBrands"\n\t\t\t\t\t\t\t\tclass="mt-form"\n\t\t\t\t\t\t\t\tdefault="Choose a brand"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\tsearchable\n\t\t\t\t\t\t\t\tlabel="Brand">\n\t\t\t\t\t\t\t</chip-dropdown>\n\n\t\t\t\t\t\t\t<chip-checkbox\n\t\t\t\t\t\t\t\tid="cbVegan"\n\t\t\t\t\t\t\t\tclass="mt-form"\n\t\t\t\t\t\t\t\thelper-text="Please tick if this product contains no animal ingredients and is suitable for vegans."\n\t\t\t\t\t\t\t\tlabel="This product is vegan"\n\t\t\t\t\t\t\t</chip-checkbox>\n\t\t\t\t\t\t</chip-form>\n\t\t\t\t\t</chip-tab>\n\t\t\t\t</chip-tabgroup>\n\t\t\t',{Size:"md",OnRefreshEvents:t=>{t.querySelector("#drpBrands").GetSearchedItems=async t=>(await Brand.getAll(t)).map(t=>document.createElementWithContents("chip-dropdownitem",t.Name,{value:t.ID}))},OnCheckValid:t=>![...document.querySelectorAll("chip-form")].filter(t=>!t.reportValidity()).length,AffirmativeText:"Submit"}).then(()=>Ajax.Post("addproduct",{body:{Name:txtProductName.value.trim(),BrandID:parseInt(drpBrands.value)||0,Vegan:cbVegan.checked},success:{ok:t=>{Dialog.ShowSuccess("Product submitted","Thank you for submitting a new product to Cruelty Check! Your submission has been sent for review and will be visible on the site once accepted.")}}}))}reportIncorrect(){Dialog.ShowTextBox(Localizer.INCORRECT_INFORMATION_TITLE,Localizer.INCORRECT_INFORMATION_DESC,{Rows:12,AffirmativeText:"Submit",Multiline:!0}).then(t=>{report("INCORRECT-INFO","Incorrect Product Information",`Using the built in feedback feature, a user has reported that **${this.Name}** by **${this.Brand.Name}** has incorrect information, stating:\n>${t}`)})}}