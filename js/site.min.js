document.querySelectorAll(".btn--feedback").forEach(t=>Object.assign(t,{textContent:Localizer.FEEDBACK_BUTTON_LABEL,onclick:()=>{Dialog.ShowCustom(Localizer.FEEDBACK_TITLE,Localizer.FEEDBACK_DESC,`\n\t\t\t<chip-form>\n\t\t\t\t<chip-dropdown\n\t\t\t\t\tlabel="${Localizer.FEEDBACK_TYPE_LABEL}"\n\t\t\t\t\trequired\n\t\t\t\t\tid="drpType"\n\t\t\t\t\ttext="${Localizer.FEEDBACK_TYPE_PLACEHOLDER}">\n\n\t\t\t\t\t<chip-dropdownitem group="${Localizer.FEEDBACK_BUG_GROUP}" value="BUG">${Localizer.FEEDBACK_BUG_LABEL}</chip-dropdownitem>\n\t\t\t\t\t<chip-dropdownitem group="${Localizer.FEEDBACK_IMPROVEMENT_GROUP}" value="FEATURE">${Localizer.FEEDBACK_FEATURE_LABEL}</chip-dropdownitem>\n\t\t\t\t\t<chip-dropdownitem group="${Localizer.FEEDBACK_IMPROVEMENT_GROUP}" value="IMPROVEMENT">${Localizer.FEEDBACK_IMPROVEMENT_LABEL}</chip-dropdownitem>\n\t\t\t\t\t<chip-dropdownitem group="${Localizer.FEEDBACK_CHAT_GROUP}" value="THANKS">${Localizer.FEEDBACK_THANKS_LABEL}</chip-dropdownitem>\n\t\t\t\t</chip-dropdown>\n\n\t\t\t\t<chip-textarea\n\t\t\t\t\trows="12"\n\t\t\t\t\trequired\n\t\t\t\t\tid="txtDetails"\n\t\t\t\t\tvalidation-required="${Localizer.FEEDBACK_DETAILS_VALIDATION_REQUIRED}"\n\t\t\t\t\tclass="mt-form"\n\t\t\t\t\tlabel="${Localizer.FEEDBACK_DETAILS_LABEL}">\n\t\t\t\t</chip-textarea>\n\t\t\t</chip-form>\n\t\t`,{Size:"md",Scrollable:!0,OnCheckValid:t=>t.querySelector("chip-form").reportValidity(),AffirmativeText:"Submit"}).then(()=>report(drpType.value,"User Submitted Feedback",txtDetails.value))}}));const resultsContainer=document.getElementById("ctResults");function resetMobileView(){txtSearch.blur()}function search(){const t=txtSearch.value.trim();t&&(resultsContainer.innerHTML='<chip-loading class="d-flex m-auto mt-form--lg" size="xl"></chip-loading>',txtSearch.blur(),Product.search(t).then(e=>{resultsContainer.innerHTML="",txtResultCount.innerHTML="",txtResultCaption.innerHTML="",e.length?displayResults(e):(resultsContainer.appendChild(document.createElementWithContents("chip-emptyprompt",Localizer.EMPTY_SEARCH_DESC,{heading:Localizer.EMPTY_SEARCH_TITLE,icon:"far fa-cat",id:"epResults",className:"mt-form--lg"})),lblSearchTerm.textContent=t),document.querySelectorAll(".btn--add-product").forEach(t=>t.onclick=()=>Product.add())}))}function displayResults(t){resultsContainer.addItems(t.map(t=>buildResult(t))),txtResultCount.innerHTML=1!==t.length?Localizer.SEARCH_RESULTS_TITLE.replace("{count}",`<span class="fw-bold">${t.length}</span>`):Localizer.SEARCH_RESULT_TITLE,txtResultCaption.innerHTML=Localizer.SEARCH_RESULT_CAPTION}function report(t,e,n,i){Ajax.Post("report",{body:{type:t,title:e,description:n},success:{ok:t=>{i||Dialog.ShowSuccess(Localizer.FEEDBACK_SUCCESS_TITLE,Localizer.FEEDBACK_SUCCESS_DESC)}}})}function buildResult(t){let e=t.getAdvisories();const n=document.createElementWithContents("chip-card",`\n\t\t\t<div class="d-flex flex-column h-100">\n\t\t\t\t<div class="pc--name gap-md">\n\t\t\t\t\t<chip-text\n\t\t\t\t\t\tweight="medium"\n\t\t\t\t\t\tsize="h4">\n\t\t\t\t\t\t${t.Name}\n\t\t\t\t\t</chip-text>\n\t\t\t\t\t<chip-button\n\t\t\t\t\t\tflush\n\t\t\t\t\t\tclass="btn--report-product ms-auto"\n\t\t\t\t\t\tbutton-style="icon"\n\t\t\t\t\t\ttooltip="${Localizer.REPORT_INCORRECT_BUTTON}"\n\t\t\t\t\t\ticon="far fa-flag"\n\t\t\t\t\t\tvariation="body">\n\t\t\t\t\t</chip-button>\n\t\t\t\t</div>\n\n\t\t\t\t${t.Brands.length>1?`\n\t\t\t\t\t\t\t\t<chip-accordionitem\n\t\t\t\t\t\t\t\t\theading="${t.Brand.Name}"\n\t\t\t\t\t\t\t\t\tclass="ai--brand-name mt-xxs">\n\n\t\t\t\t\t\t\t\t\t<chip-text\n\t\t\t\t\t\t\t\t\t\tclass="mt-form"\n\t\t\t\t\t\t\t\t\t\tweight="medium"\n\t\t\t\t\t\t\t\t\t\tsize="h5">\n\t\t\t\t\t\t\t\t\t\tBrand Hierarchy\n\t\t\t\t\t\t\t\t\t</chip-text>\n\n\t\t\t\t\t\t\t\t\t<div class="brand-hierarchy gx-sm gy-xs mt-sm flex-wrap mb-xs">\n\t\t\t\t\t\t\t\t\t\t${t.Brands.map(t=>`\n\t\t\t\t\t\t\t\t\t\t\t\t<chip-text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t${t.Name}\n\t\t\t\t\t\t\t\t\t\t\t\t</chip-text>\n\t\t\t\t\t\t\t\t\t\t\t`).join("<chip-icon size='md' icon='far fa-long-arrow-right'></chip-icon>")}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</chip-accordionitem>\n\t\t\t\t\t\t\t`:`\n\t\t\t\t\t\t\t\t<chip-text\n\t\t\t\t\t\t\t\t\tvariation="secondary"\n\t\t\t\t\t\t\t\t\tclass="mt-xs">\n\t\t\t\t\t\t\t\t\t${t.Brand.Name}\n\t\t\t\t\t\t\t\t</chip-text>\n\t\t\t\t\t\t\t`}\n\n\t\t\t\t<div class="responsive-row mb-card gap-sm mt-md">\n\t\t\t\t\t${t.Vegan?`<chip-badge tooltip="Completely free of animal-derived ingredients" variation="theme-secondary" badge-style="pill">${Localizer.VEGAN_LABEL}</chip-badge>`:`<chip-badge tooltip="May contain animal-derived or ambiguous ingredients" variation="danger-secondary" badge-style="pill">${Localizer.NOT_VEGAN_LABEL}</chip-badge>`}\n\n\t\t\t\t\t${t.Brand.CrueltyFree?`<chip-badge tooltip="${t.Brand.Name} is a cruelty-free brand" badge-style="pill" variation="theme-secondary">${Localizer.CRUELTYFREE_LABEL}</chip-badge>`:""}\n\n\t\t\t\t\t${t.Brand.BCorp?`<chip-badge tooltip="${t.Brand.Name} is a B Corporation" badge-style="pill" variation="theme-secondary">${Localizer.BCORP_LABEL}</chip-badge>`:""}\n\t\t\t\t</div>\n\n\t\t\t\t${e.length?`\n\t\t\t\t\t\t\t\t<chip-text\n\t\t\t\t\t\t\t\t\tweight="medium"\n\t\t\t\t\t\t\t\t\tclass="mt-auto"\n\t\t\t\t\t\t\t\t\ticon="fas fa-exclamation-triangle"\n\t\t\t\t\t\t\t\t\ticon-colour="warning">\n\t\t\t\t\t\t\t\t\tAdvisories\n\t\t\t\t\t\t\t\t</chip-text>\n\n\t\t\t\t\t\t\t\t<div class="mt-sm">\n\t\t\t\t\t\t\t\t\t${e.trim()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`:'\n\t\t\t\t\t\t\t\t<chip-emptyprompt\n\t\t\t\t\t\t\t\t\tsize="sm"\n\t\t\t\t\t\t\t\t\tclass="m-auto"\n\t\t\t\t\t\t\t\t\ticon="fas fa-paw"\n\t\t\t\t\t\t\t\t\theading="Looks good!">\n\t\t\t\t\t\t\t\t\tBased on brand information, it doesn\'t look like there\'s anything to worry about, nice!\n\t\t\t\t\t\t\t\t</chip-emptyprompt>\n\t\t\t\t\t\t\t'}\n\t\t\t</div>\n\t\t`,{image:`/cdn-cgi/image/width=200,quality=80,format=auto/products/${t.Image}`,hideBlur:!0});return n.classList.add("cd--product"),n.querySelector(".btn--report-product").onclick=()=>t.reportIncorrect(),n}Object.assign(window.txtSearch??{},{onsuffixclick:()=>search(),onkeyup:t=>{"Enter"===t.key&&search()}});